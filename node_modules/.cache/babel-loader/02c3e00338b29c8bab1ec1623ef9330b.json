{"ast":null,"code":"import { __spreadArrays } from \"tslib\";\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { noop, off, on } from './misc/util';\n\nvar createProcess = function (options) {\n  return function (dataTransfer, event) {\n    var uri = dataTransfer.getData('text/uri-list');\n\n    if (uri) {\n      (options.onUri || noop)(uri, event);\n      return;\n    }\n\n    if (dataTransfer.files && dataTransfer.files.length) {\n      (options.onFiles || noop)(Array.from(dataTransfer.files), event);\n      return;\n    }\n\n    if (event.clipboardData) {\n      var text = event.clipboardData.getData('text');\n      (options.onText || noop)(text, event);\n      return;\n    }\n  };\n};\n\nvar useDrop = function (options, args) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  if (args === void 0) {\n    args = [];\n  }\n\n  var onFiles = options.onFiles,\n      onText = options.onText,\n      onUri = options.onUri;\n\n  var _a = useState(false),\n      over = _a[0],\n      setOverRaw = _a[1];\n\n  var setOver = useCallback(setOverRaw, []);\n  var process = useMemo(function () {\n    return createProcess(options);\n  }, [onFiles, onText, onUri]);\n  useEffect(function () {\n    var onDragOver = function (event) {\n      event.preventDefault();\n      setOver(true);\n    };\n\n    var onDragEnter = function (event) {\n      event.preventDefault();\n      setOver(true);\n    };\n\n    var onDragLeave = function () {\n      setOver(false);\n    };\n\n    var onDragExit = function () {\n      setOver(false);\n    };\n\n    var onDrop = function (event) {\n      event.preventDefault();\n      setOver(false);\n      process(event.dataTransfer, event);\n    };\n\n    var onPaste = function (event) {\n      process(event.clipboardData, event);\n    };\n\n    on(document, 'dragover', onDragOver);\n    on(document, 'dragenter', onDragEnter);\n    on(document, 'dragleave', onDragLeave);\n    on(document, 'dragexit', onDragExit);\n    on(document, 'drop', onDrop);\n\n    if (onText) {\n      on(document, 'paste', onPaste);\n    }\n\n    return function () {\n      off(document, 'dragover', onDragOver);\n      off(document, 'dragenter', onDragEnter);\n      off(document, 'dragleave', onDragLeave);\n      off(document, 'dragexit', onDragExit);\n      off(document, 'drop', onDrop);\n      off(document, 'paste', onPaste);\n    };\n  }, __spreadArrays([process], args));\n  return {\n    over: over\n  };\n};\n\nexport default useDrop;","map":null,"metadata":{},"sourceType":"module"}