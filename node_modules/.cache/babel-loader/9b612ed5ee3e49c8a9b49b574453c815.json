{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/xuel/workspace/GitHub/e-practice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/xuel/workspace/GitHub/e-practice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{omit}from'lodash';import React,{useCallback,useContext}from'react';import{useLocalStorage}from'react-use';import{dictionaries}from'resources/dictionary';var AppStateContext=/*#__PURE__*/React.createContext({});/**\n * Get the global app state.\n */export function useAppState(){var _useContext=useContext(AppStateContext),state=_useContext.state;return state;}export function useSetSoundState(){var _useContext2=useContext(AppStateContext),state=_useContext2.state,dispatch=_useContext2.dispatch;var setSound=useCallback(function(sound){return dispatch(_objectSpread(_objectSpread({},state),{},{sound:sound}));},[state,dispatch]);return[state.sound,setSound];}/**\n * Use all available dictionaries.\n */export function useDictionaries(){var _useContext3=useContext(AppStateContext),state=_useContext3.state;return state.dictionaries;}export function useSetDictionary(){var _useContext4=useContext(AppStateContext),state=_useContext4.state,dispatch=_useContext4.dispatch;return function(id){var found=dictionaries.find(function(dict){return dict.id===id;});if(found!==undefined){// TODO: remove magic number here.\nvar lastChapterNumber=Math.floor(found.length/20);dispatch(_objectSpread(_objectSpread({},state),{},{selectedDictionary:found,selectedChapter:Math.min(state.selectedChapter,lastChapterNumber)}));}};}/**\n * Use the current selected dictionary.\n */export function useSelectedDictionary(){var _useContext5=useContext(AppStateContext),state=_useContext5.state;return state.selectedDictionary;}export function useSetPronunciationState(){var _useContext6=useContext(AppStateContext),state=_useContext6.state,dispatch=_useContext6.dispatch;var setPronunciation=useCallback(function(pronunciation){return dispatch(_objectSpread(_objectSpread({},state),{},{pronunciation:pronunciation}));},[state,dispatch]);return[state.pronunciation,setPronunciation];}/**\n * Use the current selected chapter.\n */export function useSelectedChapter(){var _useContext7=useContext(AppStateContext),state=_useContext7.state,dispatch=_useContext7.dispatch;return[state.selectedChapter,function(selectedChapter){return dispatch(_objectSpread(_objectSpread({},state),{},{selectedChapter:selectedChapter}));}];}/**\n * Dark Mode\n */export function useDarkMode(){var _useContext8=useContext(AppStateContext),state=_useContext8.state,dispatch=_useContext8.dispatch;var setDarkMode=useCallback(function(darkMode){dispatch(_objectSpread(_objectSpread({},state),{},{darkMode:darkMode}));darkMode?document.documentElement.classList.add('dark'):document.documentElement.classList.remove('dark');},[state,dispatch]);return[state.darkMode,setDarkMode];}var defaultState={sound:true,dictionaries:dictionaries,selectedDictionary:dictionaries[0],pronunciation:'us',selectedChapter:0,darkMode:window.matchMedia('(prefers-color-scheme: dark)').matches};export var AppStateProvider=function AppStateProvider(_ref){var children=_ref.children;var _useLocalStorage=useLocalStorage('state',defaultState,options),_useLocalStorage2=_slicedToArray(_useLocalStorage,2),state=_useLocalStorage2[0],setState=_useLocalStorage2[1];return/*#__PURE__*/_jsx(AppStateContext.Provider,{value:{state:state,dispatch:setState},children:children});};var options={raw:false,serializer:function serializer(state){return JSON.stringify(omit(state,'dictionaries'));},deserializer:function deserializer(source){var state=JSON.parse(source);state.dictionaries=dictionaries;return state;}};","map":null,"metadata":{},"sourceType":"module"}