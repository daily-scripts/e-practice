{"ast":null,"code":"import _slicedToArray from\"/Users/xuel/workspace/GitHub/e-practice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import{useAppState}from'store/AppState';import useSound from'use-sound';import{addHowlListener}from'../utils/utils';var pronunciationApi='https://dict.youdao.com/dictvoice?audio=';function generateWordSoundSrc(word,pronunciation){switch(pronunciation){case'uk':return\"\".concat(pronunciationApi).concat(word,\"&type=1\");case'us':return\"\".concat(pronunciationApi).concat(word,\"&type=2\");case'jap':return\"\".concat(pronunciationApi).concat(word,\"&le=jap\");}}export default function usePronunciationSound(word){var _useAppState=useAppState(),pronunciation=_useAppState.pronunciation;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isPlaying=_useState2[0],setIsPlaying=_useState2[1];var _useSound=useSound(generateWordSoundSrc(word,pronunciation),{html5:true,format:['mp3']}),_useSound2=_slicedToArray(_useSound,2),play=_useSound2[0],_useSound2$=_useSound2[1],stop=_useSound2$.stop,sound=_useSound2$.sound;useEffect(function(){if(!sound)return;var unListens=[];unListens.push(addHowlListener(sound,'play',function(){return setIsPlaying(true);}));unListens.push(addHowlListener(sound,'end',function(){return setIsPlaying(false);}));unListens.push(addHowlListener(sound,'pause',function(){return setIsPlaying(false);}));unListens.push(addHowlListener(sound,'playerror',function(){return setIsPlaying(false);}));return function(){unListens.forEach(function(unListen){return unListen();});sound.unload();};},[sound]);return{play:play,stop:stop,isPlaying:isPlaying};}","map":null,"metadata":{},"sourceType":"module"}